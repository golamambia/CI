!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(h){"use strict";var d,p;h.fn.ratingLocales={},h.fn.ratingThemes={},d={NAMESPACE:".rating",DEFAULT_MIN:0,DEFAULT_MAX:5,DEFAULT_STEP:.5,isEmpty:function(e,t){return null==e||0===e.length||t&&""===h.trim(e)},getCss:function(e,t){return e?" "+t:""},addCss:function(e,t){e.removeClass(t).addClass(t)},getDecimalPlaces:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},applyPrecision:function(e,t){return parseFloat(e.toFixed(t))},handler:function(e,t,a,n,i){var r=i?t:t.split(" ").join(d.NAMESPACE+" ")+d.NAMESPACE;n||e.off(r),e.on(r,a)}},(p=function(e,t){this.$element=h(e),this._init(t)}).prototype={constructor:p,_parseAttr:function(e,t){var a,n,i,r,s=this.$element,l=s.attr("type");if("range"===l||"number"===l){switch(n=t[e]||s.data(e)||s.attr(e),e){case"min":i=d.DEFAULT_MIN;break;case"max":i=d.DEFAULT_MAX;break;default:i=d.DEFAULT_STEP}a=d.isEmpty(n)?i:n,r=parseFloat(a)}else r=parseFloat(t[e]);return isNaN(r)?i:r},_parseValue:function(e){var t=parseFloat(e);return isNaN(t)&&(t=this.clearValue),!this.zeroAsNull||0!==t&&"0"!==t?t:null},_setDefault:function(e,t){d.isEmpty(this[e])&&(this[e]=t)},_initSlider:function(e){var t=this,a=t.$element.val();t.initialValue=d.isEmpty(a)?0:a,t._setDefault("min",t._parseAttr("min",e)),t._setDefault("max",t._parseAttr("max",e)),t._setDefault("step",t._parseAttr("step",e)),(isNaN(t.min)||d.isEmpty(t.min))&&(t.min=d.DEFAULT_MIN),(isNaN(t.max)||d.isEmpty(t.max))&&(t.max=d.DEFAULT_MAX),(isNaN(t.step)||d.isEmpty(t.step)||0===t.step)&&(t.step=d.DEFAULT_STEP),t.diff=t.max-t.min},_initHighlight:function(e){var t,a=this,n=a._getCaption();e||(e=a.$element.val()),t=a.getWidthFromValue(e)+"%",a.$filledStars.width(t),a.cache={caption:n,width:t,val:e}},_getContainerCss:function(){var e=this;return"rating-container"+d.getCss(e.theme,"theme-"+e.theme)+d.getCss(e.rtl,"rating-rtl")+d.getCss(e.size,"rating-"+e.size)+d.getCss(e.animate,"rating-animate")+d.getCss(e.disabled||e.readonly,"rating-disabled")+d.getCss(e.containerClass,e.containerClass)},_checkDisabled:function(){var e=this,t=e.$element,a=e.options;e.disabled=void 0===a.disabled?t.attr("disabled")||!1:a.disabled,e.readonly=void 0===a.readonly?t.attr("readonly")||!1:a.readonly,e.inactive=e.disabled||e.readonly,t.attr({disabled:e.disabled,readonly:e.readonly})},_addContent:function(e,t){var a=this.$container,n="clear"===e;return this.rtl?n?a.append(t):a.prepend(t):n?a.prepend(t):a.append(t)},_generateRating:function(){var e,t,a,n=this,i=n.$element;t=n.$container=h(document.createElement("div")).insertBefore(i),d.addCss(t,n._getContainerCss()),n.$rating=e=h(document.createElement("div")).attr("class","rating-stars").appendTo(t).append(n._getStars("empty")).append(n._getStars("filled")),n.$emptyStars=e.find(".empty-stars"),n.$filledStars=e.find(".filled-stars"),n._renderCaption(),n._renderClear(),n._initHighlight(),t.append(i),n.rtl&&(a=Math.max(n.$emptyStars.outerWidth(),n.$filledStars.outerWidth()),n.$emptyStars.width(a)),i.appendTo(e)},_getCaption:function(){return this.$caption&&this.$caption.length?this.$caption.html():this.defaultCaption},_setCaption:function(e){this.$caption&&this.$caption.length&&this.$caption.html(e)},_renderCaption:function(){var e,t=this,a=t.$element.val(),n=t.captionElement?h(t.captionElement):"";if(t.showCaption){if(e=t.fetchCaption(a),n&&n.length)return d.addCss(n,"caption"),n.html(e),void(t.$caption=n);t._addContent("caption",'<div class="caption">'+e+"</div>"),t.$caption=t.$container.find(".caption")}},_renderClear:function(){var e,t=this,a=t.clearElement?h(t.clearElement):"";if(t.showClear){if(e=t._getClearClass(),a.length)return d.addCss(a,e),a.attr({title:t.clearButtonTitle}).html(t.clearButton),void(t.$clear=a);t._addContent("clear",'<div class="'+e+'" title="'+t.clearButtonTitle+'">'+t.clearButton+"</div>"),t.$clear=t.$container.find("."+t.clearButtonBaseClass)}},_getClearClass:function(){return this.clearButtonBaseClass+" "+(this.inactive?"":this.clearButtonActiveClass)},_toggleHover:function(e){var t,a,n,i=this;e&&(i.hoverChangeStars&&(t=i.getWidthFromValue(i.clearValue),a=e.val<=i.clearValue?t+"%":e.width,i.$filledStars.css("width",a)),i.hoverChangeCaption&&(n=e.val<=i.clearValue?i.fetchCaption(i.clearValue):e.caption)&&i._setCaption(n+""))},_init:function(e){var t,a=this,n=a.$element.addClass("rating-input");return a.options=e,h.each(e,function(e,t){a[e]=t}),(a.rtl||"rtl"===n.attr("dir"))&&(a.rtl=!0,n.attr("dir","rtl")),a.starClicked=!1,a.clearClicked=!1,a._initSlider(e),a._checkDisabled(),a.displayOnly&&(a.inactive=!0,a.showClear=!1,a.showCaption=!1),a._generateRating(),a._initEvents(),a._listen(),t=a._parseValue(n.val()),n.val(t),n.removeClass("rating-loading")},_initEvents:function(){var u=this;u.events={_getTouchPosition:function(e){return(d.isEmpty(e.pageX)?e.originalEvent.touches[0].pageX:e.pageX)-u.$rating.offset().left},_listenClick:function(e,t){if(e.stopPropagation(),e.preventDefault(),!0===e.handled)return!1;t(e),e.handled=!0},_noMouseAction:function(e){return!u.hoverEnabled||u.inactive||e&&e.isDefaultPrevented()},initTouch:function(e){var t,a,n,i,r,s,l,o,c=u.clearValue||0;("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&!u.inactive&&(t=e.originalEvent,a=d.isEmpty(t.touches)?t.changedTouches:t.touches,n=u.events._getTouchPosition(a[0]),"touchend"===e.type?(u._setStars(n),o=[u.$element.val(),u._getCaption()],u.$element.trigger("change").trigger("rating:change",o),u.starClicked=!0):(r=(i=u.calculate(n)).val<=c?u.fetchCaption(c):i.caption,s=u.getWidthFromValue(c),l=i.val<=c?s+"%":i.width,u._setCaption(r),u.$filledStars.css("width",l)))},starClick:function(e){var t,a;u.events._listenClick(e,function(e){if(u.inactive)return!1;t=u.events._getTouchPosition(e),u._setStars(t),a=[u.$element.val(),u._getCaption()],u.$element.trigger("change").trigger("rating:change",a),u.starClicked=!0})},clearClick:function(e){u.events._listenClick(e,function(){u.inactive||(u.clear(),u.clearClicked=!0)})},starMouseMove:function(e){var t,a;u.events._noMouseAction(e)||(u.starClicked=!1,t=u.events._getTouchPosition(e),a=u.calculate(t),u._toggleHover(a),u.$element.trigger("rating:hover",[a.val,a.caption,"stars"]))},starMouseLeave:function(e){var t;u.events._noMouseAction(e)||u.starClicked||(t=u.cache,u._toggleHover(t),u.$element.trigger("rating:hoverleave",["stars"]))},clearMouseMove:function(e){var t,a,n;!u.events._noMouseAction(e)&&u.hoverOnClear&&(u.clearClicked=!1,t='<span class="'+u.clearCaptionClass+'">'+u.clearCaption+"</span>",a=u.clearValue,n={caption:t,width:u.getWidthFromValue(a)||0,val:a},u._toggleHover(n),u.$element.trigger("rating:hover",[a,t,"clear"]))},clearMouseLeave:function(e){var t;u.events._noMouseAction(e)||u.clearClicked||!u.hoverOnClear||(t=u.cache,u._toggleHover(t),u.$element.trigger("rating:hoverleave",["clear"]))},resetForm:function(e){e&&e.isDefaultPrevented()||u.inactive||u.reset()}}},_listen:function(){var e=this,t=e.$element,a=t.closest("form"),n=e.$rating,i=e.$clear,r=e.events;return d.handler(n,"touchstart touchmove touchend",h.proxy(r.initTouch,e)),d.handler(n,"click touchstart",h.proxy(r.starClick,e)),d.handler(n,"mousemove",h.proxy(r.starMouseMove,e)),d.handler(n,"mouseleave",h.proxy(r.starMouseLeave,e)),e.showClear&&i.length&&(d.handler(i,"click touchstart",h.proxy(r.clearClick,e)),d.handler(i,"mousemove",h.proxy(r.clearMouseMove,e)),d.handler(i,"mouseleave",h.proxy(r.clearMouseLeave,e))),a.length&&d.handler(a,"reset",h.proxy(r.resetForm,e),!0),t},_getStars:function(e){var t,a='<span class="'+e+'-stars">';for(t=1;t<=this.stars;t++)a+='<span class="star">'+this[e+"Star"]+"</span>";return a+"</span>"},_setStars:function(e){var t=this,a=arguments.length?t.calculate(e):t.calculate(),n=t.$element,i=t._parseValue(a.val);return n.val(i),t.$filledStars.css("width",a.width),t._setCaption(a.caption),t.cache=a,n},showStars:function(e){var t=this._parseValue(e);return this.$element.val(t),this._setStars()},calculate:function(e){var t=this,a=d.isEmpty(t.$element.val())?0:t.$element.val(),n=arguments.length?t.getValueFromPosition(e):a,i=t.fetchCaption(n),r=t.getWidthFromValue(n);return{caption:i,width:r+="%",val:n}},getValueFromPosition:function(e){var t,a,n=this,i=d.getDecimalPlaces(n.step),r=n.$rating.width();return a=n.diff*e/(r*n.step),a=n.rtl?Math.floor(a):Math.ceil(a),t=d.applyPrecision(parseFloat(n.min+a*n.step),i),t=Math.max(Math.min(t,n.max),n.min),n.rtl?n.max-t:t},getWidthFromValue:function(e){var t,a,n=this.min,i=this.max,r=this.$emptyStars;return!e||e<=n||n===i?0:(t=(a=r.outerWidth())?r.width()/a:1,i<=e?100:(e-n)*t*100/(i-n))},fetchCaption:function(e){var t,a,n,i=this,r=parseFloat(e)||i.clearValue,s=i.starCaptions,l=i.starCaptionClasses;return r&&r!==i.clearValue&&(r=d.applyPrecision(r,d.getDecimalPlaces(i.step))),n="function"==typeof l?l(r):l[r],a="function"==typeof s?s(r):s[r],t=d.isEmpty(a)?i.defaultCaption.replace(/\{rating}/g,r):a,'<span class="'+(d.isEmpty(n)?i.clearCaptionClass:n)+'">'+(r===i.clearValue?i.clearCaption:t)+"</span>"},destroy:function(){var e=this.$element;return d.isEmpty(this.$container)||this.$container.before(e).remove(),h.removeData(e.get(0)),e.off("rating").removeClass("rating rating-input")},create:function(e){var t=e||this.options||{};return this.destroy().rating(t)},clear:function(){var e=this,t='<span class="'+e.clearCaptionClass+'">'+e.clearCaption+"</span>";return e.inactive||e._setCaption(t),e.showStars(e.clearValue).trigger("change").trigger("rating:clear")},reset:function(){return this.showStars(this.initialValue).trigger("rating:reset")},update:function(e){return arguments.length?this.showStars(e):this.$element},refresh:function(e){var t=this.$element;return e?this.destroy().rating(h.extend(!0,this.options,e)).trigger("rating:refresh"):t}},h.fn.rating=function(o){var c=Array.apply(null,arguments),u=[];switch(c.shift(),this.each(function(){var e,t=h(this),a=t.data("rating"),n="object"==typeof o&&o,i=n.theme||t.data("theme"),r=n.language||t.data("language")||"en",s={},l={};a||(i&&(s=h.fn.ratingThemes[i]||{}),"en"===r||d.isEmpty(h.fn.ratingLocales[r])||(l=h.fn.ratingLocales[r]),e=h.extend(!0,{},h.fn.rating.defaults,s,h.fn.ratingLocales.en,l,n,t.data()),a=new p(this,e),t.data("rating",a)),"string"==typeof o&&u.push(a[o].apply(a,c))}),u.length){case 0:return this;case 1:return void 0===u[0]?this:u[0];default:return u}},h.fn.rating.defaults={theme:"",language:"en",stars:5,filledStar:'<i class="glyphicon glyphicon-star"></i>',emptyStar:'<i class="glyphicon glyphicon-star-empty"></i>',containerClass:"",size:"md",animate:!0,displayOnly:!1,rtl:!1,showClear:!0,showCaption:!0,starCaptionClasses:{.5:"label label-danger badge-danger",1:"label label-danger badge-danger",1.5:"label label-warning badge-warning",2:"label label-warning badge-warning",2.5:"label label-info badge-info",3:"label label-info badge-info",3.5:"label label-primary badge-primary",4:"label label-primary badge-primary",4.5:"label label-success badge-success",5:"label label-success badge-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0,zeroAsNull:!0},h.fn.ratingLocales.en={defaultCaption:"{rating} Stars",starCaptions:{.5:"0.5",1:"1",1.5:"1.5",2:"2",2.5:"2.5",3:"3",3.5:"3.5",4:"4",4.5:"4.5",5:"5"},clearButtonTitle:"Clear",clearCaption:"Not Rated"},h.fn.rating.Constructor=p,h(document).ready(function(){var e=h("input.rating");e.length&&e.removeClass("rating-loading").addClass("rating-loading").rating()})});